{"project":"platform/upstream/setup","branch":"tizen","id":"I65ecd84a7be60a510081743d45a69fd3d4eaa9b3","number":"31768","subject":"Removing user and group buxton","owner":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"url":"https://review.tizen.org/gerrit/31768","commitMessage":"Removing user and group buxton\n\nBy principle, this setup should contain the minimum.\nBuxton is an optional component thus its user and group\nmust be created on need.\n\nChange-Id: I65ecd84a7be60a510081743d45a69fd3d4eaa9b3\nSigned-off-by: José Bollo \u003cjose.bollo@open.eurogiciel.org\u003e\n","createdOn":1418135385,"lastUpdated":1420798354,"sortKey":"0032594400007c18","open":true,"status":"NEW","comments":[{"timestamp":1418135385,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Uploaded patch set 1."},{"timestamp":1418135564,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 1: Verified+1"},{"timestamp":1418660842,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1418904877,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 1:\n\nping maintainers"},{"timestamp":1419247845,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 1:\n\nping maintainers"},{"timestamp":1420740786,"reviewer":{"name":"william douglas","email":"william.douglas@intel.com","username":"wdouglas"},"message":"Patch Set 1:\n\nHow do the buxton user and group get added with this removal (I expect another change to dynamically add them with package install or something)?"},{"timestamp":1420798354,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 1:\n\nlast ping maintainers"}]}
{"project":"platform/upstream/setup","branch":"tizen","id":"I0b68954f5554fe86b083f1e6c7e80511f783649e","number":"31701","subject":"Add a user and a group for systemd-bus-proxyd","owner":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"url":"https://review.tizen.org/gerrit/31701","commitMessage":"Add a user and a group for systemd-bus-proxyd\n\nsystemd-bus-proxyd which provides communication between\nDBus clients and kdbus bus runs as an unprivileged user.\n\nBug-Tizen: TC-1024/related\nChange-Id: I0b68954f5554fe86b083f1e6c7e80511f783649e\nSigned-off-by: Łukasz Stelmach \u003cl.stelmach@samsung.com\u003e\n","createdOn":1418052734,"lastUpdated":1418312595,"sortKey":"0031b76f00007bd5","open":true,"status":"NEW","comments":[{"timestamp":1418052734,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Uploaded patch set 1."},{"timestamp":1418052933,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 1: Verified+1"},{"timestamp":1418052968,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Uploaded patch set 2."},{"timestamp":1418053186,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 3: Commit message was updated"},{"timestamp":1418053725,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 3: Verified+1"},{"timestamp":1418054150,"reviewer":{"name":"Maciej Wereski","email":"m.wereski@partner.samsung.com","username":"mwereski"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1418054260,"reviewer":{"name":"Philippe Coval","email":"philippe.coval@open.eurogiciel.org","username":"pcoval"},"message":"Patch Set 3: Code-Review+1\n\nPlease add Bug-Tizen: 42/related"},{"timestamp":1418054905,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 3:\n\nIs it really the right place?\nMaybe a specific package could add the user/group."},{"timestamp":1418055377,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 3:\n\nAs of now, I feel adding these credentials here is the right way to do because:\n\n* We want kdbus to be part of official images, so it is not going to be optional, although we may disable kdbus at boot time by default.\n* Until we enable sysusers feature of systemd we\u0027d like to avoid adding and removing users with useradd/userdel."},{"timestamp":1418055850,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 4: Commit message was updated"},{"timestamp":1418055949,"reviewer":{"name":"Maciej Wereski","email":"m.wereski@partner.samsung.com","username":"mwereski"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1418112665,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 4: Verified+1"},{"timestamp":1418202416,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 4: Code-Review+2"},{"timestamp":1418203303,"reviewer":{"name":"Stéphane Desneux (sdx)","email":"stephane.desneux@open.eurogiciel.org","username":"sdx"},"message":"Patch Set 4: Code-Review-1\n\nEven if this change is harmless, I\u0027d prefer to see kdbus specific options handled through a global config flag set in the project config. \n\nI propose to add a _width_kdbus option in the OBS project config. Then in the spec files, use %bcond_with kdbus. And in this particular case, it would be easy to add something like this in the install section:\n%if %{with kdbus}\ncat passwd.kdbus \u003e\u003epasswd\n%endif"},{"timestamp":1418204690,"reviewer":{"name":"Dominig ar Foll","email":"dominig.arfoll@fridu.net","username":"dominig"},"message":"Patch Set 4: Code-Review-1\n\nCopy from my message left on the Dev mailing list.\n\n-------- Message transféré --------\nSujet : \tForcing non agreed architecture changes is not acceptable.\nDate : \tWed, 10 Dec 2014 10:42:18 +0100\nDe : \tDominig ar Foll (Intel OTC) \u003cdominig.arfoll@fridu.net\u003e\nPour : \tdev@lists.tizen.org \u003cdev@lists.tizen.org\u003e\n\n\nHello,\n\nI see today in Gerrit a patch pushed in an unacceptable way and I would \nlike to see that type of behaviour changed.\nI speak about the review\n   https://review.tizen.org/gerrit/#/c/31701/\n\nThe push is justified on the comment :\n\n\"Patch Set 3:\nAs of now, I feel adding these credentials here is the right way to do \nbecause:\n    We want kdbus to be part of official images, so it is not going to \nbe optional, although we may disable kdbus at boot time by default.\n    Until we enable sysusers feature of systemd we\u0027d like to avoid \nadding and removing users with useradd/userdel.\"\n\nThe \"We want Kdbus ...\" is not an agreed general feature but can only \nbe, as today, a valid profile specific request.\nSo the patch as it is shall be rejected :-(\n\nIn order to get it in, the same person pushed it, verified it, and \naccept it in less than 2 hours of working day time in Europe where are \nlocated the Common reviewers.\nSorry but that is not acceptable.\n\n1) Same person submitting, verifying and accepting a patch (even simple) \nis not in line with Tizen review model,\n2) A decent time should be left for reviewer to voice their concerns. \nTypical 24h to cover multiple time zones.\n3) Architecture change shall be agreed by architecture team to get in \nCommon.\n\nSo please do not force changes any more.\nIn that specific case, if you need Kdbus in a profile before than it is \nagree to be generalised in Common, please make an agreement with Common \nto enable it with a clean model.\nIn that specific case the use of a \"%bcond_with kdbus\" seems a viable model.\n\nPlease sync with Common RE (Stéphane) to see if that model would work \nfor all of us.\n\nPlease accept my apologies for having to be a bit rude.\n\nRegards\n\n-- \nDominig ar Foll\nSenior Software Architect\nOpen Source Technology Centre\nIntel SSG"},{"timestamp":1418206829,"reviewer":{"name":"Philippe Coval","email":"philippe.coval@open.eurogiciel.org","username":"pcoval"},"message":"Patch Set 4:\n\nBug 42 was an example , if you\u0027re able to change it please use the real kdbus feature jira item since it\u0027s something \"hot\" ... to make all those changes are well tracked"},{"timestamp":1418210143,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 5: Commit message was updated"},{"timestamp":1418210154,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 5: Verified+1"},{"timestamp":1418211116,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Uploaded patch set 6."},{"timestamp":1418211205,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 6: Verified+1"},{"timestamp":1418211237,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Uploaded patch set 7."},{"timestamp":1418211255,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 7: Verified+1"},{"timestamp":1418213678,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 7:\n\nThe idea of stephane is not bad but there is an issue that we have to take care about: the unicity and coherency of the numeric identifiers.\n\nThat is why using useradd in specific packages is much better."},{"timestamp":1418215528,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 7:\n\nThat is a good point and that is why I didn\u0027t use conditionals in the first place. To make that UID and GID visible for everyone who wish to add their users.\n\nAs I wrote before I hope we can soon move to systemd-sysusers\n\nhttp://www.freedesktop.org/software/systemd/man/systemd-sysusers.html\n\nso please accept this patch as it is now (or was without conditionals)."},{"timestamp":1418217819,"reviewer":{"name":"José Bollo","email":"jose.bollo@open.eurogiciel.org","username":"jobol"},"message":"Patch Set 7:\n\nLukasz, I can not do much except a +1 that I put not (like -1 that I don\u0027t put too).\n\nHow will systemd-sysuser enter? It depends on how it fits the gap with functions getpwent, getpwnam, getlogin, ... I am not optimist here because, probably, a lot code has to be inspected.\n\nSo what will be the benefit of systemd-sysuser: little, big, giant, huge, enormous or just nothing more than a complication? I don\u0027t know.\n\nI already wrote about using useradd and I\u0027m not understanding the reason that makes its use impossible. However, trusting you, that reason should exist.\n\nAnyway, here, I don\u0027t want to vote because I have no strong opinion. But I was in the review... Why? don\u0027t know."},{"timestamp":1418218223,"reviewer":{"name":"Philippe Coval","email":"philippe.coval@open.eurogiciel.org","username":"pcoval"},"message":"Patch Set 7:\n\nthanks for crosslinking to jira\n\nhttps://bugs.tizen.org/jira/browse/TC-1024\n\nwhere last comment was : \n\n{\n\nFrancesco Balestrieri added a comment - 03/Sep/14 10:57 PM\n\nDominig ar Foll I\u0027m moving this to \"future\", if you have any better estimate please update the target release.\n\n}\n\nSo to avoid confusion, I prefer to hold reviewing this ... may you also keep the changes in sandbox to share the feature to those who dont want to wait for future ? and let it know in jira \n\nMay architects help reviewing and eventually merge it ?\nie: Affect TC-1024 to them ?\n\nhope this help\n\nKind Regards"},{"timestamp":1418218682,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 7:\n\nThink about systemd-sysusers as a thick robust wrapper around useradd (and userdel? I am not sure). It reads files from /usr/lib/sysusers.d and adds users and groups accordingly. With a simple macro in %post and a drop-in file a devloper can add users to the system. Then with a bunch of files in the directory complete passwd can be recreated (think: \"factory reset\") during boot if it does not exist.\n\nI think it is somewhere around giant advantage."},{"timestamp":1418227299,"reviewer":{"name":"Stéphane Desneux (sdx)","email":"stephane.desneux@open.eurogiciel.org","username":"sdx"},"message":"Patch Set 7: Code-Review+1\n\n(1 comment)\n\nI just updated project config for Common: https://review.tizen.org/gerrit/31825"},{"timestamp":1418286614,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Patch Set 7:\n\n(1 comment)\n\nI am still not sure the whole conditional stuff is needed in this case. If you think it is I will adhere."},{"timestamp":1418287500,"reviewer":{"name":"Lukasz Stelmach","email":"l.stelmach@samsung.com","username":"lstelmach"},"message":"Uploaded patch set 8."},{"timestamp":1418312595,"reviewer":{"name":"Stéphane Desneux (sdx)","email":"stephane.desneux@open.eurogiciel.org","username":"sdx"},"message":"Patch Set 8: Code-Review+1\n\nLukasz, maybe the conditional stuff is not absolutely required for this package, but we will probably need it somewhere else.\n\nSo I feel that it\u0027s a good idea to officialize such build option and use it everywhere needed from now on. It\u0027s far better than to have to introduce the flag later and fix packages afterwards.\n\nBTW, maybe the %check section should be adjusted to take the extra UID/GID for kdbus into account ?"}]}
